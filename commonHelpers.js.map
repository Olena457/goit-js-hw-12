{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function fetchImages(query, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const KEY = '43261756-f7e91f342fa994673ba6d269c';\n\n  const OTHERS_PARAMS = `?key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n\n  try {\n    const response = await axios.get(`${BASE_URL}${OTHERS_PARAMS}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","export const galleryEl = document.querySelector('.gallery');\n\nexport function renderImages(images) {\n  if (!Array.isArray(images)) {\n    console.error('Expected images to be an array');\n    return;\n  }\n\n  const markup = images.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      return ` \n      <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n    </a>\n    <div class='caption'>\n    <p class='caption-item'>\n      <b>Likes</b>\n      ${likes}\n    </p>\n    <p class='caption-item'>\n      <b>Views</b>\n      ${views}\n    </p>\n    <p class='caption-item'>\n      <b>Comments</b>\n      ${comments}\n    </p>\n    <p class='caption-item'>\n      <b>Downloads</b>\n      ${downloads}\n    </p>\n  </div>\n    </li>`;\n    }\n  );\n  galleryEl.insertAdjacentHTML('beforeend', markup.join(''));\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { galleryEl } from './js/render-functions';\nimport { renderImages } from './js/render-functions';\n\nconst searchForm = document.querySelector('.js-search');\nlet preloader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', handleSearchSubmit);\nloadMoreBtn.addEventListener('click', onClickMoreBtn);\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet currentHits = 0;\nlet query = '';\nlet totalHits = 0;\n\nasync function handleSearchSubmit(ev) {\n  ev.preventDefault();\n  query = ev.target.elements.query.value.trim();\n  currentPage = 1;\n\n  if (!query) {\n    iziToast.show({\n      title: 'Error',\n      message: `Please enter a search query!`,\n      position: 'topRight',\n      color: '#da1418',\n      timeout: 2000,\n    });\n    return;\n  }\n  try {\n    preloader.classList.remove('hidden');\n    const resp = await fetchImages(query, currentPage);\n    totalHits = resp.totalHits;\n    currentHits = resp.hits.length;\n\n    galleryEl.innerHTML = '';\n    addImagesToGallery(resp.hits);\n\n    if (totalHits > 15) {\n      loadMoreBtn.classList.remove('hidden');\n    } else {\n      loadMoreBtn.classList.add('hidden');\n    }\n    scrollToNewImages();\n  } catch (error) {\n    iziToast.show({\n      title: 'Error',\n      message: `Sorry, there are no images matching your search query. Please try again!`,\n      position: 'topRight',\n      color: '#da1418',\n      timeout: 2000,\n    });\n  } finally {\n    preloader.classList.add('hidden');\n  }\n}\n\nasync function onClickMoreBtn() {\n  currentPage += 1;\n  try {\n    const resp = await fetchImages(query, currentPage);\n    addImagesToGallery(resp.hits);\n    lightbox.refresh();\n    currentHits += resp.hits.length;\n\n    if (currentHits >= resp.totalHits) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.info({\n        title: 'Info',\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n        color: ' #21d4bce0',\n        timeout: 2000,\n      });\n    }\n  } catch (error) {\n    iziToast.show({\n      title: 'Error',\n      message: `Sorry, there are no images matching your search query. Please try again!`,\n      position: 'topRight',\n      color: '#da1418',\n      timeout: 2000,\n    });\n  }\n}\n\nfunction addImagesToGallery(images) {\n  const markup = renderImages(images);\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\nfunction scrollToNewImages() {\n  const { top } = galleryEl.getBoundingClientRect();\n  window.scrollTo({ top: top + window.scrollY, behavior: 'smooth' });\n}\n"],"names":["fetchImages","query","page","BASE_URL","OTHERS_PARAMS","axios","error","galleryEl","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","preloader","loadMoreBtn","handleSearchSubmit","onClickMoreBtn","lightbox","SimpleLightbox","currentPage","currentHits","totalHits","ev","iziToast","resp","addImagesToGallery","scrollToNewImages","top"],"mappings":"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"}